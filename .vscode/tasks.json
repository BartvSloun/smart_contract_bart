{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Compile Contract",
            "type": "shell",
            "command": "cargo partisia-contract build --release",
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [],
            "group": {
                "kind": "build",
                "isDefault": false
            }
        },
        {
            "label": "Compile All Contracts",
            "type": "shell",
            "command": "cargo partisia-contract build --release",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "group": {
                "kind": "build",
                "isDefault": true
            }
        },
        {
            "label": "Deploy Petition Contract",
            "type": "shell",
            "command": "cargo partisia-contract cli tx deploy --gas 2500000 --privatekey .vscode/${input:key}.pk target/wasm32-unknown-unknown/release/petition.wasm target/wasm32-unknown-unknown/release/petition.abi 'Cake is better than oatmeal.'",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "group": {
                "kind": "build",
                "isDefault": false
            }
        },
        {
            "label": "Sign petition.",
            "type": "shell",
            "command": "cargo partisia-contract cli tx action --gas 20000 --privatekey .vscode/${input:key}.pk ${input:contract-address} sign",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "group": {
                "kind": "build",
                "isDefault": false
            }
        },
        {
            "label": "Deploy an Average Salary Contract (ZK-contract).",
            "type": "shell",
            "command": "cargo partisia-contract cli tx deploy --gas 10000000 --privatekey .vscode/${input:key}.pk target/wasm32-unknown-unknown/release/average_salary.zkwa target/wasm32-unknown-unknown/release/average_salary.abi",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "group": {
                "kind": "build",
                "isDefault": false
            }
        },
        {
            "label": "Send a salary as a secret input to an average salary contract.",
            "type": "shell",
            "command": "cargo partisia-contract cli tx action  --gas 100000 --privatekey .vscode/${input:key}.pk ${input:contract-address} add_salary ${input:salary}",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "group": {
                "kind": "build",
                "isDefault": false
            }
        },
        {
            "label": "Compute average salary, starting the ZK computation.",
            "type": "shell",
            "command": "cargo partisia-contract cli tx action --gas 20000 --privatekey .vscode/${input:key}.pk ${input:contract-address} compute_average_salary",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "group": {
                "kind": "build",
                "isDefault": false
            }
        },
        {
            "label": "Show the ABI for a contract.",
            "type": "shell",
            "command": "cargo partisia-contract abi show target/wasm32-unknown-unknown/release/${input:contract-name}.abi",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "group": {
                "kind": "build",
                "isDefault": false
            }
        }
    ],
    "inputs": [
        {
            "id": "contract-address",
            "description": "The Address of the deployed contract.",
            "type": "promptString"
        },
        {
            "id": "key",
            "description": "The id of the key, to perform the given action with. Can be either A, B or C.",
            "type": "pickString",
            "options": [
                "A",
                "B",
                "C"
            ],
            "default": "A"
        },
        {
            "id": "contract-name",
            "description": "The name of the contract to use the command on.",
            "type": "pickString",
            "options": [
                "petition",
                "average_salary"
            ],
            "default": "petition"
        },
        {
            "id": "salary",
            "description": "The salary to send as secret input to average salary, the salary should be an int.",
            "type": "promptString"
        }

    ]
}